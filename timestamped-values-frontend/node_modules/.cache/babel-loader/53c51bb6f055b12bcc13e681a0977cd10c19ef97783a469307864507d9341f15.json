{"ast":null,"code":"var _jsxFileName = \"/Users/yatishgoel/Desktop/candidate_test/timestamped-values-frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nfunction App() {\n  _s();\n  const [data, setData] = useState(null);\n  const [nextPage, setNextPage] = useState(null);\n  useEffect(() => {\n    fetchData('http://localhost:8000/candidate_test/fronted/');\n  }, []);\n  const fetchData = url => {\n    axios.get(url).then(response => {\n      setData(prevData => {\n        if (prevData) {\n          return {\n            ...response.data,\n            results: [...prevData.results, ...response.data.results]\n          };\n        }\n        return response.data;\n      });\n      setNextPage(response.data.next);\n    }).catch(error => console.error('Error fetching data:', error));\n  };\n  const loadMore = () => {\n    if (nextPage) {\n      fetchData(nextPage);\n    }\n  };\n  const processData = results => {\n    const processedData = [];\n    results.forEach(yearObj => {\n      const year = Object.keys(yearObj)[0];\n      const months = yearObj[year];\n      months.forEach(monthObj => {\n        const month = Object.keys(monthObj)[0];\n        const entries = monthObj[month];\n        entries.forEach(entry => {\n          const [timestamp, value] = Object.entries(entry)[0];\n          processedData.push({\n            timestamp,\n            value\n          });\n        });\n      });\n    });\n    return processedData.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n  };\n  const chartData = data ? processData(data.results) : [];\n  const chartConfig = {\n    labels: chartData.map(item => item.timestamp),\n    datasets: [{\n      label: 'Value',\n      data: chartData.map(item => item.value),\n      backgroundColor: 'rgba(75, 192, 192, 0.6)'\n    }]\n  };\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: 'Timestamped Values'\n      },\n      tooltip: {\n        callbacks: {\n          label: context => {\n            const dataIndex = context.dataIndex;\n            const timestamp = chartData[dataIndex].timestamp;\n            const value = context.parsed.y;\n            return `Time: ${timestamp}, Value: ${value}`;\n          }\n        }\n      }\n    },\n    scales: {\n      x: {\n        title: {\n          display: true,\n          text: 'Timestamp'\n        },\n        ticks: {\n          maxRotation: 90,\n          minRotation: 90,\n          callback: function (value, index) {\n            // Display full timestamp on every nth tick to avoid overcrowding\n            return index % 3 === 0 ? this.getLabelForValue(value) : '';\n          }\n        }\n      },\n      y: {\n        title: {\n          display: true,\n          text: 'Value'\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Timestamped Values\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), data ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Bar, {\n        data: chartConfig,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), nextPage && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadMore,\n        children: \"Load More\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"CFu5ooblo7Ec5Uv9ifdBX+0mJQM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","Fragment","_Fragment","register","App","_s","data","setData","nextPage","setNextPage","fetchData","url","get","then","response","prevData","results","next","catch","error","console","loadMore","processData","processedData","forEach","yearObj","year","Object","keys","months","monthObj","month","entries","entry","timestamp","value","push","sort","a","b","Date","chartData","chartConfig","labels","map","item","datasets","label","backgroundColor","options","responsive","plugins","legend","position","title","display","text","tooltip","callbacks","context","dataIndex","parsed","y","scales","x","ticks","maxRotation","minRotation","callback","index","getLabelForValue","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/yatishgoel/Desktop/candidate_test/timestamped-values-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Bar } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nfunction App() {\n  const [data, setData] = useState(null);\n  const [nextPage, setNextPage] = useState(null);\n\n  useEffect(() => {\n    fetchData('http://localhost:8000/candidate_test/fronted/');\n  }, []);\n\n  const fetchData = (url) => {\n    axios.get(url)\n      .then(response => {\n        setData(prevData => {\n          if (prevData) {\n            return {\n              ...response.data,\n              results: [...prevData.results, ...response.data.results]\n            };\n          }\n          return response.data;\n        });\n        setNextPage(response.data.next);\n      })\n      .catch(error => console.error('Error fetching data:', error));\n  };\n\n  const loadMore = () => {\n    if (nextPage) {\n      fetchData(nextPage);\n    }\n  };\n\n  const processData = (results) => {\n    const processedData = [];\n    results.forEach(yearObj => {\n      const year = Object.keys(yearObj)[0];\n      const months = yearObj[year];\n      months.forEach(monthObj => {\n        const month = Object.keys(monthObj)[0];\n        const entries = monthObj[month];\n        entries.forEach(entry => {\n          const [timestamp, value] = Object.entries(entry)[0];\n          processedData.push({ timestamp, value });\n        });\n      });\n    });\n    return processedData.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n  };\n\n  const chartData = data ? processData(data.results) : [];\n\n  const chartConfig = {\n    labels: chartData.map(item => item.timestamp),\n    datasets: [\n      {\n        label: 'Value',\n        data: chartData.map(item => item.value),\n        backgroundColor: 'rgba(75, 192, 192, 0.6)',\n      },\n    ],\n  };\n\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top',\n      },\n      title: {\n        display: true,\n        text: 'Timestamped Values',\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => {\n            const dataIndex = context.dataIndex;\n            const timestamp = chartData[dataIndex].timestamp;\n            const value = context.parsed.y;\n            return `Time: ${timestamp}, Value: ${value}`;\n          }\n        }\n      }\n    },\n    scales: {\n      x: {\n        title: {\n          display: true,\n          text: 'Timestamp'\n        },\n        ticks: {\n          maxRotation: 90,\n          minRotation: 90,\n          callback: function(value, index) {\n            // Display full timestamp on every nth tick to avoid overcrowding\n            return index % 3 === 0 ? this.getLabelForValue(value) : '';\n          }\n        }\n      },\n      y: {\n        title: {\n          display: true,\n          text: 'Value'\n        }\n      }\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Timestamped Values</h1>\n      {data ? (\n        <>\n          <Bar data={chartConfig} options={options} />\n          {nextPage && <button onClick={loadMore}>Load More</button>}\n        </>\n      ) : (\n        <p>Loading data...</p>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}